#!/usr/bin/env bash

NODES=(identity reader reviewer administrator)
DIRECTORIES=(common database)
FILES=(Dockerfile .dockerignore alembic.ini)

for NODE in "${NODES[@]}"
do
  TARGET=node-${NODE}

  for DIRECTORY in "${DIRECTORIES[@]}"
  do
    rsync -v -r -d --delete --delete-excluded node-common/${DIRECTORY} ${TARGET}
  done

  for FILE in "${FILES[@]}"
  do
    cp -v node-common/${FILE} ${TARGET}
  done
done
